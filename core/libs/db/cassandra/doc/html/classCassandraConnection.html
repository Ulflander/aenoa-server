<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Cassandra PHP Client Library: CassandraConnection Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Cassandra PHP Client Library</div>
   <div id="projectbrief">Cassandra PHP-based client library for managing and querying your Cassandra cluster.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>CassandraConnection Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CassandraConnection" --><table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#a7f75a298bf9fb6362d38f4aeb42ceb28">__construct</a> ($host= '127.0.0.1', $port=9160, $useFramedTransport=true, $sendTimeoutMs=null, $receiveTimeoutMs=null)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#ab491ef3fe8550d70856e708e528cb570">__destruct</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#abd8bbd3ef94126f1e6a274b5ad512ece">close</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#aed004bd39c88a8aea40292f9c5271512">isOpen</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#a9333243e248f73414e25d5fe143250df">getClient</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#a7f12a9a108ea4d89083a48bbebdb8a60">getTransport</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#adb1d52d166f36506ab94605b260e821f">getProtocol</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#a9bb32ec133d74c18a5ab142a33b96539">useKeyspace</a> ($keyspace, $username=null, $password=null)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#a6886c992c6b7cbc24deb801fb8ee52db">createSocket</a> ($host, $port, $sendTimeoutMs, $receiveTimeoutMs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#a00c2d10e54028d15cfb5ef8bde3468d3">createFramedTransport</a> (TSocket $socket)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCassandraConnection.html#a3e3b2e2318ff07ee56bcae235634c2e4">createBufferedTransport</a> (TSocket $socket)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7ac95fc265637f0043ed4a1751d4073d"></a><!-- doxytag: member="CassandraConnection::$host" ref="a7ac95fc265637f0043ed4a1751d4073d" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$host</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a36f082a05939ae4532bff76878f6e66b"></a><!-- doxytag: member="CassandraConnection::$port" ref="a36f082a05939ae4532bff76878f6e66b" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$port</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3fcb133a131b3836b91908a7495e215e"></a><!-- doxytag: member="CassandraConnection::$useFramedTransport" ref="a3fcb133a131b3836b91908a7495e215e" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$useFramedTransport</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac293faec52dd505e5c9a18f5ed31ed99"></a><!-- doxytag: member="CassandraConnection::$sendTimeoutMs" ref="ac293faec52dd505e5c9a18f5ed31ed99" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$sendTimeoutMs</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac73bb080eca4394141343841ac3c45cd"></a><!-- doxytag: member="CassandraConnection::$receiveTimeoutMs" ref="ac73bb080eca4394141343841ac3c45cd" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$receiveTimeoutMs</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6aac74a2193fb8a8d223b5ec8d5793a2"></a><!-- doxytag: member="CassandraConnection::$socket" ref="a6aac74a2193fb8a8d223b5ec8d5793a2" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$socket</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a709c8b7fdbd7f90bce67a400466a410b"></a><!-- doxytag: member="CassandraConnection::$transport" ref="a709c8b7fdbd7f90bce67a400466a410b" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$transport</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afcb5feee11548cac9e50b81b0c79bc97"></a><!-- doxytag: member="CassandraConnection::$protocol" ref="afcb5feee11548cac9e50b81b0c79bc97" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$protocol</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a8d7d42cb84e49f715905e9859266ab"></a><!-- doxytag: member="CassandraConnection::$client" ref="a0a8d7d42cb84e49f715905e9859266ab" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$client</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab014396c373813e451be830993f05f76"></a><!-- doxytag: member="CassandraConnection::$isOpen" ref="ab014396c373813e451be830993f05f76" args="" -->
&#160;</td><td class="memItemRight" valign="bottom"><b>$isOpen</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Represents a connection to a single <a class="el" href="classCassandra.html">Cassandra</a> node.</p>
<p>Provides direct access to the low-level <a class="el" href="classCassandra.html">Cassandra</a> client. </p>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00050">50</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7f75a298bf9fb6362d38f4aeb42ceb28"></a><!-- doxytag: member="CassandraConnection::__construct" ref="a7f75a298bf9fb6362d38f4aeb42ceb28" args="($host= '127.0.0.1', $port=9160, $useFramedTransport=true, $sendTimeoutMs=null, $receiveTimeoutMs=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::__construct </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>host</em> = <code>'127.0.0.1'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>port</em> = <code>9160</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>useFramedTransport</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>sendTimeoutMs</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>receiveTimeoutMs</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs the connection, setting access parameters.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$host</td><td>Hostname or IP of the node </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$port</td><td>Port of the instance </td></tr>
    <tr><td class="paramtype">boolean</td><td class="paramname">$useFramedTransport</td><td>Use framed or buffered transport </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$sendTimeoutMs</td><td>Timeout of send operations in milliseconds </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$receiveTimeoutMs</td><td>Timeout of receive operations </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00131">131</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">      {
        $this-&gt;host = $host;
        $this-&gt;port = $port;
        $this-&gt;useFramedTransport = $useFramedTransport;
        $this-&gt;sendTimeoutMs = $sendTimeoutMs;
        $this-&gt;receiveTimeoutMs = $receiveTimeoutMs;
        $this-&gt;<a class="code" href="classCassandraConnection.html#aed004bd39c88a8aea40292f9c5271512">isOpen</a> = <span class="keyword">false</span>;
        
        $this-&gt;socket = $this-&gt;<a class="code" href="classCassandraConnection.html#a6886c992c6b7cbc24deb801fb8ee52db">createSocket</a>(
            $host,
            $port,
            $sendTimeoutMs,
            $receiveTimeoutMs
        );
        
        <span class="keywordflow">if</span> ($useFramedTransport) {
            $this-&gt;transport = $this-&gt;<a class="code" href="classCassandraConnection.html#a00c2d10e54028d15cfb5ef8bde3468d3">createFramedTransport</a>($this-&gt;socket);
        } <span class="keywordflow">else</span> {
            $this-&gt;transport = $this-&gt;<a class="code" href="classCassandraConnection.html#a3e3b2e2318ff07ee56bcae235634c2e4">createBufferedTransport</a>($this-&gt;socket);
        }
        
        $this-&gt;transport-&gt;open();
        $this-&gt;<a class="code" href="classCassandraConnection.html#aed004bd39c88a8aea40292f9c5271512">isOpen</a> = <span class="keyword">true</span>;
        
        $this-&gt;protocol = <span class="keyword">new</span> TBinaryProtocolAccelerated($this-&gt;transport);
        $this-&gt;client = <span class="keyword">new</span> CassandraClient($this-&gt;protocol);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ab491ef3fe8550d70856e708e528cb570"></a><!-- doxytag: member="CassandraConnection::__destruct" ref="ab491ef3fe8550d70856e708e528cb570" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::__destruct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Closes the connection on destruction. </p>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00168">168</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">                                 {
        $this-&gt;<a class="code" href="classCassandraConnection.html#abd8bbd3ef94126f1e6a274b5ad512ece">close</a>();
    }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="abd8bbd3ef94126f1e6a274b5ad512ece"></a><!-- doxytag: member="CassandraConnection::close" ref="abd8bbd3ef94126f1e6a274b5ad512ece" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Forces the connection to close.</p>
<p>Generally there's no need to call it yourself as it will be closed on termination. </p>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00178">178</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">                            {
        <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classCassandraConnection.html#aed004bd39c88a8aea40292f9c5271512">isOpen</a>) {
            $this-&gt;transport-&gt;flush();
            $this-&gt;transport-&gt;close();
            
            $this-&gt;<a class="code" href="classCassandraConnection.html#aed004bd39c88a8aea40292f9c5271512">isOpen</a> = <span class="keyword">false</span>;
        }
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a3e3b2e2318ff07ee56bcae235634c2e4"></a><!-- doxytag: member="CassandraConnection::createBufferedTransport" ref="a3e3b2e2318ff07ee56bcae235634c2e4" args="(TSocket $socket)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::createBufferedTransport </td>
          <td>(</td>
          <td class="paramtype">TSocket $&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates buffered transport.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">TSocket</td><td class="paramname">$socket</td><td>Socket to base the transport on </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TBufferedTransport Instance of the transport </dd></dl>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00316">316</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                                {
        require_once THRIFT_PATH.<span class="stringliteral">&#39;/transport/TBufferedTransport.php&#39;</span>;
            
        <span class="keywordflow">return</span> <span class="keyword">new</span> TBufferedTransport($socket, 512, 512);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a00c2d10e54028d15cfb5ef8bde3468d3"></a><!-- doxytag: member="CassandraConnection::createFramedTransport" ref="a00c2d10e54028d15cfb5ef8bde3468d3" args="(TSocket $socket)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::createFramedTransport </td>
          <td>(</td>
          <td class="paramtype">TSocket $&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates framed transport.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">TSocket</td><td class="paramname">$socket</td><td>Socket to base the transport on </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TFramedTransport Instance of the transport </dd></dl>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00304">304</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">                                                              {
        require_once THRIFT_PATH.<span class="stringliteral">&#39;/transport/TFramedTransport.php&#39;</span>;
            
        <span class="keywordflow">return</span> <span class="keyword">new</span> TFramedTransport($socket, <span class="keyword">true</span>, <span class="keyword">true</span>);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a6886c992c6b7cbc24deb801fb8ee52db"></a><!-- doxytag: member="CassandraConnection::createSocket" ref="a6886c992c6b7cbc24deb801fb8ee52db" args="($host, $port, $sendTimeoutMs, $receiveTimeoutMs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::createSocket </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>sendTimeoutMs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>receiveTimeoutMs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates the socket to use.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$host</td><td>Hostname/IP </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$port</td><td>Port number </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$sendTimeoutMs</td><td>Send operations timeout </td></tr>
    <tr><td class="paramtype">integer</td><td class="paramname">$receiveTimeoutMs</td><td>Receive operations timeout </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>TSocket Initiated socket connection </dd></dl>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00279">279</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">      {
        $socket = <span class="keyword">new</span> TSocket($host, $port);
        
        <span class="keywordflow">if</span> ($sendTimeoutMs !== null) {
            $socket-&gt;setSendTimeout($sendTimeoutMs);
        }
        
        <span class="keywordflow">if</span> ($receiveTimeoutMs !== null) {
            $socket-&gt;setRecvTimeout($receiveTimeoutMs);
        }
        
        <span class="keywordflow">return</span> $socket;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a9333243e248f73414e25d5fe143250df"></a><!-- doxytag: member="CassandraConnection::getClient" ref="a9333243e248f73414e25d5fe143250df" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::getClient </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the low-level <a class="el" href="classCassandra.html">Cassandra</a> client used by the wrapper.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>CassandraClient </dd></dl>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00201">201</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">                                {
        <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classCassandraConnection.html#aed004bd39c88a8aea40292f9c5271512">isOpen</a>) {
            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classCassandraConnectionClosedException.html">CassandraConnectionClosedException</a>(
                <span class="stringliteral">&#39;The connection has been closed&#39;</span>
            );
        }
        
        <span class="keywordflow">return</span> $this-&gt;client;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="adb1d52d166f36506ab94605b260e821f"></a><!-- doxytag: member="CassandraConnection::getProtocol" ref="adb1d52d166f36506ab94605b260e821f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::getProtocol </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the used transportation protocol.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>TBinaryProtocolAccelerated </dd></dl>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00225">225</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">                                  {
        <span class="keywordflow">return</span> $this-&gt;transport;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a7f12a9a108ea4d89083a48bbebdb8a60"></a><!-- doxytag: member="CassandraConnection::getTransport" ref="a7f12a9a108ea4d89083a48bbebdb8a60" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::getTransport </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the used transport method.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>TTransport </dd></dl>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00216">216</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
        <span class="keywordflow">return</span> $this-&gt;transport;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="aed004bd39c88a8aea40292f9c5271512"></a><!-- doxytag: member="CassandraConnection::isOpen" ref="aed004bd39c88a8aea40292f9c5271512" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::isOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Is the connection open.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00192">192</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">                             {
        <span class="keywordflow">return</span> $this-&gt;<a class="code" href="classCassandraConnection.html#aed004bd39c88a8aea40292f9c5271512">isOpen</a>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a9bb32ec133d74c18a5ab142a33b96539"></a><!-- doxytag: member="CassandraConnection::useKeyspace" ref="a9bb32ec133d74c18a5ab142a33b96539" args="($keyspace, $username=null, $password=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CassandraConnection::useKeyspace </td>
          <td>(</td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>keyspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>username</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&#160;</td>
          <td class="paramname"><em>password</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Attempts to start using given keyspace.</p>
<p>Using the keyspace is attempted three times before giving up.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$keyspace</td><td>Name of the keyspace </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$username</td><td>Optional username in case authentication is used </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$password</td><td>Optional password </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Cassandra_8php_source.html#l00238">238</a> of file <a class="el" href="Cassandra_8php_source.html">Cassandra.php</a>.</p>
<div class="fragment"><pre class="fragment">      {
        $attempts = 3;
        $success = <span class="keyword">false</span>;

        <span class="keywordflow">while</span>($attempts-- &gt; 0 &amp;&amp; !$success) {
            <span class="keywordflow">try</span> {
                $this-&gt;client-&gt;set_keyspace($keyspace);
                $success = <span class="keyword">true</span>;
            } <span class="keywordflow">catch</span> (cassandra_InvalidRequestException $e) {
                <span class="keywordflow">continue</span>;
            }
        }
        
        <span class="keywordflow">if</span> (!$success) {
            <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="classCassandraSettingKeyspaceFailedException.html">CassandraSettingKeyspaceFailedException</a>(
                <span class="stringliteral">&#39;Using keyspace &quot;&#39;</span>.$keyspace.<span class="stringliteral">&#39;&quot; failed after several attempts&#39;</span>
            );
        }
        
        <span class="keywordflow">if</span> ($username !== null) {
            $request = <span class="keyword">new</span> cassandra_AuthenticationRequest(
                array(<span class="stringliteral">&#39;credentials&#39;</span> =&gt; array($username, $password))
            );

            $this-&gt;client-&gt;login($request);
        }
    }
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="Cassandra_8php_source.html">Cassandra.php</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Jul 4 2011 14:35:59 for Cassandra PHP Client Library by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
